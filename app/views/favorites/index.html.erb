<div class="banner text-center">
  <h1 class="display-4 text-white">Your <span class="highlight">Favorites</span></h1>
  <p class="lead text-white">Browse your favorite trending topics from various platforms.</p>
</div>

<!-- Platform Selector -->
<div class="container">
  <%= form_with url: favorites_path, method: :get, local: true, class: "form-inline custom-form" do %>
    <div class="form-group">
      <%= label_tag :platform, 'Select Platform:', class: 'mr-2' %>
      <%= select_tag :platform, options_for_select([['All Platforms', ''], ['TikTok', 'tiktok'], ['YouTube', 'youtube']], selected: params[:platform]), class: 'form-control custom-select' %>
    </div>
    <%= submit_tag 'Filter', class: 'btn btn-primary ml-2 custom-btn' %>
  <% end %>
</div>

<!-- Display Favorite Trends -->
<% if @favorite.trends.present? %>
  <div class="container my-5">
    <h2>Your Favorite Trends:</h2>
    <div class="row">
      <% @favorite.trends.each do |trend| %>
        <% if params[:platform].blank? || trend.platform == params[:platform] %>
          <div class="col-md-4">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title"><%= trend.title %></h5>
                <p class="card-text"><strong>Platform:</strong> <%= trend.platform.capitalize %></p>
                <% if trend.view_count.present? %>
                  <p class="card-text"><strong>Views:</strong> <%= trend.formatted_count(trend.view_count) %></p>
                <% end %>
                <% if trend.like_count.present? %>
                  <p class="card-text"><strong>Likes:</strong> <%= trend.formatted_count(trend.like_count) %></p>
                <% end %>
                <%= button_to 'Remove from Favorites',
                    favorite_remove_trend_path(favorite_id: current_user.favorite.id, trend_id: trend.id),
                    method: :delete,
                    class: 'btn btn-danger' %>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
<% else %>
  <div class="container my-5">
    <h2>Uh-oh, your collection is feeling lonely! ðŸ˜”</h2>
    <p>Time to fill it with some epic trends! ðŸ“ˆâœ¨ Start exploring and improve your communication strategy! ðŸŽ‰</p>
    <%= link_to 'Browse trends', trends_path, class: 'btn btn-primary' %>
  </div>
<% end %>
